<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RO Skill Cast Simulator</title>
  <link rel="stylesheet" type="text/css" href="assets/ragnarokOnline.css">
  <link rel="stylesheet" type="text/css" href="assets/index.css">

  <script type="importmap">
    {
      "imports": {
        "yaml": "https://unpkg.com/yaml@^2/browser"
      }
    }
  </script>
  <script src="./script/index.mjs" type="module" async></script>
</head>

<body>
  <div>
    <section id="stats-panel">
      <header>
        <button></button>
        <span>Status</span>
        <input type="checkbox">
      </header>

      <main>
        <article>
          <div>
            <label for="int">Int</label>
            <input id="int" type="number" min="1" max="999" value="1">
          </div>
          <div>
            <label for="dex">Dex</label>
            <input id="dex" type="number" min="1" max="999" value="1">
          </div>
        </article>
      </main>

      <footer></footer>
    </section>

    <section id="modifier-panel">
      <header>
        <button></button>
        <span>Casting Modifers</span>
        <input type="checkbox" checked>
      </header>

      <main>
        <article id="freeform-modifiers">
          <div>
            <label for="freeform-vct">Variable Cast Time</label>
            <input id="freeform-vct" type="number" value="0" min="0">
          </div>
          <div>
            <label for="freeform-fct">Fixed Cast Time</label>
            <input id="freeform-fct" type="number" value="0" min="0">
          </div>
        </article>
        <article>
          <input id="percentage-check" type="radio" name="modifier-type" value="percentage" checked>
          <label for="percentage-check">Percentage</label>
          <input id="seconds-check" type="radio" name="modifier-type" value="seconds">
          <label for="seconds-check">Seconds</label>
        </article>
      </main>

      <footer>
        <textarea readonly rows="5"
          cols="90">Note: If multiple Fixed Cast Time modifiers are active on the player, only the highest will contribute to the formula.
For example, if a Rebel is afflicted with Sacrament (50%) and uses Hit Barrel with 2 coins (10%), only Sacrament will be applied.</textarea>
      </footer>
    </section>
  </div>

  <div>
    <section>
      <header>
        <button></button>
        <span>Skill Selection</span>
        <input type="checkbox">
      </header>

      <main>
        <article>
          <div>
            <label for="skill-select">Skill</label>
            <img id="skill-icon" src="" width="24" height="24" hidden></img>
            <select id="skill-select" required>
              <option>Loading...</option>
            </select>
          </div>
          <div>
            <label for="skill-level">Level</label>
            <!-- Max level controlled by Skill DB, but 10 is a sane default -->
            <input id="skill-level" type="number" min="1" max="10" maxlength="2" value="1">
          </div>
        </article>
      </main>

      <footer></footer>
    </section>

    <section>
      <header>
        <button></button>
        <span>Skill Metadata</span>
        <input type="checkbox" checked>
      </header>
      <main>
        <article>
          <textarea id="skill-metadata" cols="30" rows="10" readonly></textarea>
        </article>
      </main>
      <footer></footer>
    </section>
  </div>

  <div>
    <section id="results-panel">
      <header>
        <button></button>
        <span>Results</span>
      </header>

      <main>
        <article>
          <div>
            <label for="var-cast-time">Variable Cast Time</label>
            <input id="var-cast-time" value="?" readonly disabled>
            <label>seconds</label>
          </div>
          <div>
            <label for="fixed-cast-time">Fixed Cast Time</label>
            <input id="fixed-cast-time" value="?" readonly disabled>
            <label>seconds</label>
          </div>
          <br>

          <div>
            <label for="final-cast-time">Total Cast Time</label>
            <input id="final-cast-time" value="?" readonly disabled>
            <label>seconds</label>
          </div>
        </article>

        <article id="casting-animation">
          <span id="skill-name" class="hidden" style="pointer-events: none;" readonly>&nbsp;</span>
          <progress id="skill-progress" class="hidden"></progress>
          <img id="job-gif" height="100" width="auto" src="assets/jobs/Novice.png"
            onerror="this.src='assets/jobs/Novice.png'" />
        </article>
      </main>

      <footer>
        <button id="cast-button">Cast !!</button>
      </footer>
    </section>
  </div>
</body>

</html>
